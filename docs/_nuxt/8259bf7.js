(window.webpackJsonp=window.webpackJsonp||[]).push([[2,12,16,17],{458:function(e,t,n){"use strict";n.r(t);n(223);var r=n(94),o=Object(r.b)({name:"StudentRow",props:{student:{type:Object,required:!1,default:function(){}},orderNo:{type:Number,required:!1,default:0}},computed:{avg:function(){return this.calculateAvgGrade(this.student.grades)}}}),d=n(95),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[e.orderNo?n("td",[e._v(e._s(e.orderNo)+".")]):e._e(),e._v(" "),n("td",[e._v(e._s(e.student.lastName.toUpperCase())+" "+e._s(e.student.firstName))]),e._v(" "),n("td",e._l(e.student.grades,(function(t,r){return n("div",{key:"new_student_grade-"+r,class:[{gradeWeightColor:t.score||t.weight},e.gradeColor(t.weight)],on:{mouseenter:function(n){return e.showGradeDetails(n,t)},mouseleave:function(t){return e.hideGradeDetails(t)}}},[e._v("\n      "+e._s(t.score)+"\n    ")])})),0),e._v(" "),n("td",[e._v(e._s(e.avg))]),e._v(" "),n("td",[e.avg&&e.avg<2?n("span",{staticClass:"fire"},[e._v("\n      "+e._s(e.$t("at_risk").toUpperCase())+"\n    ")]):e._e()])])}),[],!1,null,null,null);t.default=component.exports},459:function(e,t,n){var content=n(463);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(130).default)("fcb9e48e",content,!0,{sourceMap:!1})},460:function(e,t,n){"use strict";n.r(t);var r=n(47),o=(n(223),n(12),n(70),n(94)),d=Object(o.b)({name:"Grade",props:{index:{type:Number,required:!0},grade:{type:Object,required:!1,default:function(){return{score:"",weight:"",description:"",date:""}}}},emits:["updateGrade","removeGrade"],setup:function(e,t){var n=t.root,d=t.emit,l=e.index,c=e.grade||Object(o.f)(),v=Object(o.f)(30),f=Object(o.f)(n.$t("characters_left_many",{characters:v.value-c.description.length}));return Object(o.n)((function(){return Object(r.a)(c.description)}),(function(){var e=v.value-c.description.length;switch(e){case 2:case 3:case 4:case 22:case 23:case 24:f.value=n.$t("characters_left_few",{characters:e});break;case 1:f.value=n.$t("characters_left_one",{characters:e});break;default:f.value=n.$t("characters_left_many",{characters:e})}})),Object(o.d)((function(){c.date=n.getCurrentDate(),d("updateGrade",c,l)})),{leftCharactersMessage:f,remove:function(e){d("removeGrade",e)}}}}),l=(n(462),n(95)),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"grade_"+e.index,staticClass:"newStudentPanelGradesContentSingle mb-3"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row singleGrade"},[n("div",{staticClass:"col-2 col-md-3"},[n("div",{staticClass:"newStudentPanelGradesContentSingleGrade"},[n("div",{staticClass:"select"},[n("label",{attrs:{for:"score"}},[e._v(e._s(e.$t("grade_score"))+":")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model.number",value:e.grade.score,expression:"grade.score",modifiers:{number:!0}}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var n="_value"in t?t._value:t.value;return e._n(n)}));e.$set(e.grade,"score",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"1"}},[e._v("1")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("3")]),e._v(" "),n("option",{attrs:{value:"4"}},[e._v("4")]),e._v(" "),n("option",{attrs:{value:"5"}},[e._v("5")]),e._v(" "),n("option",{attrs:{value:"6"}},[e._v("6")])])])])]),e._v(" "),n("div",{staticClass:"col-2 col-md-3"},[n("div",{staticClass:"newStudentPanelGradesContentSingleWeight"},[n("label",{attrs:{for:"weight"}},[e._v(e._s(e.$t("grade_weight"))+":")]),e._v(" "),n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model.number",value:e.grade.weight,expression:"grade.weight",modifiers:{number:!0}}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var n="_value"in t?t._value:t.value;return e._n(n)}));e.$set(e.grade,"weight",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"1"}},[e._v("1")]),e._v(" "),n("option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),n("option",{attrs:{value:"3"}},[e._v("3")])])])])]),e._v(" "),n("div",{staticClass:"col-6 col-md-5"},[n("div",{staticClass:"newStudentPanelGradesContentSingleDescription"},[n("span",{staticClass:"descriptionCount"},[e._v(e._s(e.leftCharactersMessage)+".")]),e._v(" "),n("label",{staticClass:"description"},[e._v(e._s(e.$t("grade_description"))+":\n\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.grade.description,expression:"grade.description"}],staticClass:"description",attrs:{autocomplete:"off",type:"text",maxlength:"30"},domProps:{value:e.grade.description},on:{input:function(t){t.target.composing||e.$set(e.grade,"description",t.target.value)}}})])])]),e._v(" "),n("div",{staticClass:"col-1"},[n("span",{staticClass:"remove",on:{click:function(t){return e.remove(e.index)}}},[n("em",[e._v(e._s(e.$t("remove")))])])])])])])}),[],!1,null,"0aa217bf",null);t.default=component.exports},461:function(e,t,n){"use strict";n.r(t);var r=n(94),o=n(458),d=Object(r.b)({name:"StudentTable",props:{student:{type:Object,required:!1,default:function(){}}},components:{StudentRow:o.default}}),l=n(95),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"mb-3"},[n("tbody",[n("StudentRow",{attrs:{student:e.student}})],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{StudentRow:n(458).default})},462:function(e,t,n){"use strict";n(459)},463:function(e,t,n){var r=n(129)(!1);r.push([e.i,".newStudentPanelGradesContentSingle .singleGrade[data-v-0aa217bf]{display:flex;align-items:flex-end}.newStudentPanelGradesContentSingle .singleGrade input[data-v-0aa217bf]:focus,.newStudentPanelGradesContentSingle .singleGrade select[data-v-0aa217bf]:focus{border:2px solid #a5cda5;box-shadow:0 0 3px 2px hsla(0,0%,80%,.9)}",""]),e.exports=r},474:function(e,t,n){var content=n(517);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(130).default)("65a6bce3",content,!0,{sourceMap:!1})},516:function(e,t,n){"use strict";n(474)},517:function(e,t,n){var r=n(129)(!1);r.push([e.i,"div.editStudent[data-v-014c83da]{background-color:#000;font-size:13px;top:20%;left:50%;transform:translateX(-50%)}div.editStudent .overlay[data-v-014c83da]{background-color:#000;position:absolute;top:0;left:0;width:100%;height:100%}div.editStudent button.save[data-v-014c83da]{font-size:15px;float:right}div.editStudent button.save[disabled][data-v-014c83da]{background-color:#f80b0b;cursor:not-allowed}div.editStudent button.closeEditPanelBtn[data-v-014c83da]{top:-10px;right:-10px;width:40px;height:40px;border-radius:50px;outline:none;z-index:100}div.editStudent button.closeEditPanelBtn img.closeEditPanelImg[data-v-014c83da]{box-shadow:2px 2px 10px 2px #d54545;border-radius:50px}",""]),e.exports=r},521:function(e,t,n){var content=n(537);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(130).default)("25e19abf",content,!0,{sourceMap:!1})},528:function(e,t,n){"use strict";n.r(t);var r=n(30),o=(n(83),n(38),n(27),n(39),n(461)),d=n(539),l=n(529),c=n(476),v=n(94),f=Object(v.b)({name:"StudentPanel",components:{StudentTable:o.default,EditData:d.default,EditGrades:l.default},props:{student:{type:Object,required:!1,default:function(){}}},mixins:[c.a],emits:["fetch"],setup:function(e,t){var n=t.root,o=t.emit,c=Object(v.m)(),f=Object(v.k)(),_=Object(v.l)();var m=Object(v.f)(["pesel","phone","email","address","mother","father"]),h=Object(v.h)(null);Object(v.e)((function(){"data"===f.value.query.edit?h.value=d.default:"grades"===f.value.query.edit&&(h.value=l.default)})),Object(v.n)((function(){return f.value.query}),(function(){switch(f.value.query.edit){case"data":h.value=d.default;break;case"grades":h.value=l.default;break;default:h.value=null}}));var y=Object(v.i)().$http,x=f.value.params.name;function w(){return(w=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$toast.show(this.$t("updating_student_data_in_progress")),e.next=4,y.$put("/api/students/".concat(x),{student:t,group:c.getters.loggedInUser.group},{headers:{Authorization:n.$auth.strategy.token.get()}});case 4:return e.next=6,o("fetch");case 6:this.$toast.success(this.$t("successfully_updated_student_data")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),this.$toast.error(this.$t("failed_to_update_student_data"));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})))).apply(this,arguments)}return{afterEnter:function(e){e.addEventListener("animationend",(function(){e.style=""})),e.querySelector(".overlay").style.animation="showEditStudentPanelOverlay .7s",e.querySelector(".overlay").style.animationFillMode="forwards",e.style.overflow="visible"},enter:function(e,t){e.addEventListener("animationend",(function(){e.style="",t()})),e.style.animation="showEditStudentPanel .7s",e.style.overflow="hidden"},beforeLeave:function(e){e.addEventListener("animationend",(function(){e.style=""})),e.querySelector(".overlay").style.animation="showEditStudentPanelOverlay .7s",e.querySelector(".overlay").style.animationDirection="reverse",e.querySelector(".overlay").style.animationFillMode="forwards",e.style.overflow="hidden"},leave:function(e,t){e.addEventListener("animationend",(function(){e.style="",t()})),e.style.animation="showEditStudentPanel .7s",e.style.animationDirection="reverse",e.style.animationDelay=".7s",e.style.overflow="visible"},chosenComponent:h,orderedStudentProperties:m,handleClose:function(){h.value=null,_.replace({query:null})},handleSubmit:function(e){return w.apply(this,arguments)}}}}),_=f,m=(n(536),n(95)),component=Object(m.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left pl-2"},[n("StudentTable",{attrs:{student:e.student}}),e._v(" "),n("div",{staticClass:"px-md-5 py-md-3 w-100 panel"},e._l(e.orderedStudentProperties,(function(t){return n("div",{key:"edit_student_main_panel_property_"+t,staticClass:"form-group d-flex justify-content-between"},[n("span",{staticClass:"title"},[e._v(e._s(e.$t(t))+":")]),e._v(" "),"object"!=typeof e.student[t]&&null!==e.student[t]?n("span",{staticClass:"data"},[e._v("\n        "+e._s(e.student[t])+"\n      ")]):n("span",{staticClass:"data"},e._l(e.student[t],(function(r,o){return n("span",{key:"edit_student_main_panel_subProperty_"+o},[e._v("\n          "+e._s(e.student[t][o])+"\n        ")])})),0)])})),0),e._v(" "),n("div",{staticClass:"pr-3 d-flex justify-content-end"},[n("NuxtLink",{attrs:{to:{query:{edit:"data"}}}},[n("button",{staticClass:"btn btn-lg"},[e._v("\n        "+e._s(e.$t("edit_data"))+"\n      ")])]),e._v(" "),n("NuxtLink",{attrs:{to:{query:{edit:"grades"}}}},[n("button",{staticClass:"btn btn-lg"},[e._v("\n        "+e._s(e.$t("edit_grades"))+"\n      ")])]),e._v(" "),n("transition",{attrs:{css:!1},on:{enter:e.enter,"after-enter":e.afterEnter,leave:e.leave,"before-leave":e.beforeLeave}},[n(e.chosenComponent,{ref:"editStudentPanel",tag:"component",attrs:{basedStudent:e.student},on:{close:e.handleClose,submit:e.handleSubmit}})],1)],1)],1)}),[],!1,null,"0acbcecc",null);t.default=component.exports;installComponents(component,{StudentTable:n(461).default})},529:function(e,t,n){"use strict";n.r(t);var r=n(47),o=(n(26),n(185),n(9),n(460)),d=n(461),l=n(94),c=Object(l.b)({name:"EditGrades",components:{Grade:o.default,StudentTable:d.default},props:{basedStudent:{type:Object,required:!0}},head:function(){return{title:this.$t("student_edit_page_title",{student:"".concat(this.student.lastName," ").concat(this.basedStudent.firstName)})}},setup:function(e,t){var n=t.emit,o=Object(l.f)(0),d=Object(l.f)(JSON.parse(JSON.stringify(e.basedStudent)));return{gradesLength:o,student:d,handleInitGrade:function(){o.value++,d.value.grades.push({score:null,weigth:null,description:"",date:""})},handleRemoveGrade:function(e){var t=Object(r.a)(d.value.grades);t.splice(e,1),d.value.grades=t},submit:function(){d.value.grades=d.value.grades.filter((function(e){return e.score&&e.weight})),n("submit",d.value)}}}}),v=(n(516),n(95)),component=Object(v.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"editStudent wrapper mb-3 pt-4 pb-3 position-absolute"},[r("div",{staticClass:"overlay"}),e._v(" "),r("div",{staticClass:"container"},[r("span",{staticClass:"d-block mb-3"},[e._v(e._s(e.$t("edit_grade"))+":")]),e._v(" "),r("div",{staticClass:"row"},[e._l(e.student.grades,(function(t,n){return r("Grade",{key:"edit_student_grade_"+n,staticClass:"col-12 col-md-11",attrs:{index:n,grade:t},on:{removeGrade:e.handleRemoveGrade}})})),e._v(" "),r("div",{staticClass:"showAnotherGrade"},[r("button",{attrs:{name:"moreGradesEditGrades"},on:{click:e.handleInitGrade}},[e._v("\n          +\n        ")])])],2),e._v(" "),r("StudentTable",{attrs:{student:e.student}}),e._v(" "),r("button",{staticClass:"btn btn-success btn-lg save mr-3 px-2 py-1",on:{click:e.submit}},[e._v("\n      "+e._s(e.$t("save_changes"))+"\n    ")])],1),e._v(" "),r("button",{staticClass:"closeEditPanelBtn position-absolute",on:{click:function(t){return e.$emit("close")}}},[r("img",{staticClass:"closeEditPanelImg w-100",attrs:{src:n(477)}})])])}),[],!1,null,"014c83da",null);t.default=component.exports;installComponents(component,{Grade:n(460).default,StudentTable:n(461).default})},536:function(e,t,n){"use strict";n(521)},537:function(e,t,n){var r=n(129)(!1);r.push([e.i,"button[data-v-0acbcecc]{background-color:#2f76e2;display:inline-block;font-size:13px;color:#fff;border-radius:4px;padding:6px 11px;text-shadow:1px 1px 1px violet;margin:0 15px}@media (max-width:768px){.panel[data-v-0acbcecc]{font-size:9px;padding-right:2px}button[data-v-0acbcecc]{font-size:9px;padding:5px}}",""]),e.exports=r}}]);